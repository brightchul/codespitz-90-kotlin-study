# Lecture 1

## 코틀린에 대한 이해

독립된 언어로 여러 플랫폼으로 번역되는 가운데서도 고유의 철학을 유지

- JVM : 가장 완전한 번역 및 최대한의 관련 기능 제공
- JS : 컴파일이 느리지만 리플렉션을 제외하면 대부분의 기능 제공
- android : 구글과의 협력으로 보다 폭 넓은 지원을 통해 달빅의 특수성을 해소
- ios : 코틀린이 자체적으로 IOS용 GC를 생성하여 메모리 관리
- 네이티브 및 웹어셈블리 : 자체적으로 GC를 생성해서 메모리 관리 (WASM은 표준 제안중)

> Dalvik VM :  자바 라이센스 문제로 JVM 대신 Dalvik VM을 따로 개발해서 안드로이드에 넣은 버추어 머신
>
> 네이티브 : OS 바로 위의 레이어를 의미한다. 운영체제 위에서 추가적인 레이어 없이 바로 실행되는 레이어를 말하며 즉 OS를 타게팅 한다. 



**기존 언어의 실무적인 사용 예를 참고하여 보다 생산성 높고 추상화된 개념 사용**

- 코틀린 자체가 유틸리티 기능들을 제공하여 코드가 자바 대비 30프로 줄어든다.
- 반복 패턴들을 추상화해서 없애준다. 따라서 생산성이 좋아진다.

**유저 인터페이스 영역을 배제하고 순수 메모리와 연산 분야에서의 플랫폼 추상화를 지향함**

- 코틀린이 멀티 플래폼에서 사용할수 있는 이유가 UI가 없기 때문이다.
- 각 언어마다 UI를 따로 구현해야 한다. 이런 경우 코틀린을 도입해도 코드가 줄어들지 않는다. UI를 또 따로 생성해야 하기 떄문이다.
- 구글과 젯브레인이 협력해서 컴포즈 UI가 있다. 이것은 컴포지션이 일어나는 가상의 렌더링 시스템이다. 

**코틀린을 잘하려면 다른 언어의 대체품이 아니라 독립적인 언어로서 코틀린만의 언어 구성과 철학을 익힐 필요가 있음**

- 코틀린을 다른 언어의 연장선이라고 생각하면 안 좋다.
- 코틀린 자체를 새로운 별개의 언어로 인식하고 코틀린 만의 언어 구성과 철학을 익히는게 좋다. 

 

## 언어시스템의 형

자바를 비롯해 포인터를 직접 쓰지 않는 언어 대부분의 형이 원시형, 참조형으로 되어 있다.

원시형과 참조형의 차이로 인해서 boxing, unboxing이 발생하고 래퍼타입이 존재해서 비효율이 존재한다. 

### 원시형 (Primitive)

- 대입이나 함수 인자 전달 또는 반환 시 복사됨
- 언어에 따라 스택 메모리에 잡아서 속도가 빠름

### 참조형(Reference)

- 대입 등에서 참조만 복사
- 대부분의 언어에서 힙이라 불리는 영역을 사용



## 코틀린의 기본형 (basic type)

코틀린은 원시형의 개념을 사용하지 않고 기본형을 정의한다.

basic type - number, boolean, character, string, array

코드에서는 무조건 래퍼형으로 표현하고 컴파일러가 컨텍스트와 플랫폼에 따라 래퍼형 또는 원시형 중 유리한 것으로 변환한다. 

코틀린에서는 복사냐 레퍼런스냐의 문제보다 불변성을 갖는 형이냐 아니냐가 중요하다.  플랫폼 별 가장 효율적인 번역은 코틀린이 알아서 할 것이다 .

단, 제네릭 배열과 원시형 배열을 분리하여 호환시키기 위해 원시형 배열을 별도로 제공한다. (intArray, LongArray 등)



## 코틀린의 내장형(built-int type)

- Any -  모든 형의 부모
- Nothing - 모든 형의 자식이자 제어흐름의 종결을 형으로 표현함
  - 보통 언어는 lower bound가 없는데 코틀린은 존재한다. 
  - 대체가능성으로 인해 어떤 형에도 들어간다.
  - Nothing을 만나면 무조건 throw가 자동으로 발생한다. 
  - 코틀린은 형을 통해서 throw 없이도 제어가 가능하다. 
- Unit - 없음을 나타내는 형이자 싱글톤 객체
  - 코틀린은 반환이 없는 프로시저를 없애고 반드시 리턴하는 함수만 남겼다.
  - 리턴할 것이 없을 때 unit으로 반환한다. 마치 js의 undefined와 같다.
- Throwable - 모든 예외의 부모
  - 코틀린은 예외를 전부 런타임 예외로 만들었다. 그래서 try catch를 안해도 된다.
- Function - 함수를 나타내는 형
  - 코틀린은 함수가 1급 객체인 언어이다.
- KClass, KCallable, KProperty, KFunction, KType - 리플렉션 타입
  - 셀프 디스크립션 언어이다.
  - 언어를 작동하자마자 작성 요소에 접근할 수 있게 한다.
  - 코틀린 컴파일, 플랫폼 컴파일 이렇게 2 단계 컴파일이 가능하기 때문에 다른 언어와 달리 리플랙션을 쉽게 사용할 수 있다. 



## Calculator

```
-2 * -3 + 0.4 / -0.2
-------------------------

-2*-3+0.4/-0.2           trim
+-2*+-3+0.4/+-0.2        - => +-
(+-2*+-3), (+0.4/+-0.2)  */ group
+-2, *,+-3               split
-2, *, -3                remove +
6                        calc

(+0.4/+-0.2)
+0.4, /, +-0.2           split
0.4, /, -0.2             remove +
0.4/-0.2= -2             calc

6, -2                    sum
4
```



